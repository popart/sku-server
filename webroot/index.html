<!doctype html>
<html lang="en" ng-app="app">
<head>
    <meta charset="utf-8">
    <title>Sku Manager</title>
    <link rel="stylesheet" href="css/app.css">
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/font-awesome.css">

    <script src="lib/angular.js"></script>
    <script src="lib/angular-resource.js"></script>
    <script src="js/app.js"></script>
    <script src="js/resources/sku.js"></script>
</head>
<body ng-controller="SkuCtrl">

    <div class='scroll-list left'>
        <div>
            <!--todo, this just runs getAll -->
            <span ng-click="select(null)" class="click">
                <b>New</b>
            </span>
        </div>
        <div ng-repeat="sku in skus">
            <span ng-click="select(sku.did)" class="click">
                {{sku.description}} 
            </span>
        </div>
    </div>
    <form class="left">
        <table>
        <tr><td ng-click="edit = !edit || !sku.did">
            <b ng-if="!!sku.did" class="click">Edit</b>
            <b ng-if="!sku.did">Create SKU</b></td></tr>
        <tr><td>Description:</td>
            <td><input type="text" ng-model="sku.description"
                    ng-disabled="!edit"/></td></tr>
        <tr><td>Size:</td>
            <td><input type="text" ng-model="sku.size"
                    ng-disabled="!edit"/></td></tr>
        <tr><td>Color:</td>
            <td><input type="text" ng-model="sku.color"
                    ng-disabled="!edit"/></td></tr>
        <tr><td>Photo:</td><td>
            <img src="{{sku.photo}}" ng-show="!edit">
            <input type='file' id='photo-upload'
                   name='photo-upload' ng-show="edit" />
            </td></tr>
        <tr ng-if="edit"><td></td><td>
            <button ng-click="save()">Save</button>
            <button ng-click="cancel()">Cancel</button></td></tr>

        </table>
    </form>

</body>

<script type='text/javascript'>
    var f = new FileReader()
    var res = null
    f.onload = function(e) {
        res = e.target.result
        console.log(res)
    }
    function handleFileSelect(e) {
        var file = e.target.files[0]
        if(file && file.type.match(/^image/)) {
            console.log(file.type)
            f.readAsDataURL(file)
        } else {
            e.target.value = null
        }
    }
    document.getElementById('photo-upload')
            .addEventListener('change', handleFileSelect, false)

</script>
</html>
